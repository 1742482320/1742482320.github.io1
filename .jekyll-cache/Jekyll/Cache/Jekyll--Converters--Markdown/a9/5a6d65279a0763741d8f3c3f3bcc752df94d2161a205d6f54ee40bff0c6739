I"C¹<h3 id="ä»€ä¹ˆæ˜¯webpackä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒ">ä»€ä¹ˆæ˜¯WebPackï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒï¼Ÿ</h3>

<p>ç°ä»Šçš„å¾ˆå¤šç½‘é¡µå…¶å®å¯ä»¥çœ‹åšæ˜¯åŠŸèƒ½ä¸°å¯Œçš„åº”ç”¨ï¼Œå®ƒä»¬æ‹¥æœ‰ç€å¤æ‚çš„JavaScriptä»£ç å’Œä¸€å¤§å †ä¾èµ–åŒ…ã€‚ä¸ºäº†ç®€åŒ–å¼€å‘çš„å¤æ‚åº¦ï¼Œå‰ç«¯ç¤¾åŒºæ¶Œç°å‡ºäº†å¾ˆå¤šå¥½çš„å®è·µæ–¹æ³•</p>

<ol>
  <li>æ¨¡å—åŒ–ï¼Œè®©æˆ‘ä»¬å¯ä»¥æŠŠå¤æ‚çš„ç¨‹åºç»†åŒ–ä¸ºå°çš„æ–‡ä»¶</li>
  <li>ç±»ä¼¼äºTypeScriptè¿™ç§åœ¨JavaScriptåŸºç¡€ä¸Šæ‹“å±•çš„å¼€å‘è¯­è¨€ï¼šä½¿æˆ‘ä»¬èƒ½å¤Ÿå®ç°ç›®å‰ç‰ˆæœ¬çš„JavaScriptä¸èƒ½ç›´æ¥ä½¿ç”¨çš„ç‰¹æ€§ï¼Œå¹¶ä¸”ä¹‹åè¿˜èƒ½è½¬æ¢ä¸ºJavaScriptæ–‡ä»¶ä½¿æµè§ˆå™¨å¯ä»¥è¯†åˆ«</li>
  <li>Scssï¼Œlessç­‰CSSé¢„å¤„ç†å™¨</li>
</ol>

<p>è¿™äº›æ”¹è¿›ç¡®å®å¤§å¤§çš„æé«˜äº†æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ï¼Œä½†æ˜¯åˆ©ç”¨å®ƒä»¬å¼€å‘çš„æ–‡ä»¶å¾€å¾€éœ€è¦è¿›è¡Œé¢å¤–çš„å¤„ç†æ‰èƒ½è®©æµè§ˆå™¨è¯†åˆ«,è€Œæ‰‹åŠ¨å¤„ç†åˆæ˜¯éå¸¸ç¹ççš„ï¼Œè¿™å°±ä¸ºWebPackç±»çš„å·¥å…·çš„å‡ºç°æä¾›äº†éœ€æ±‚ã€‚</p>

<p>WebPackå¯ä»¥çœ‹åšæ˜¯æ¨¡å—æ‰“åŒ…æœºï¼šå®ƒåšçš„äº‹æƒ…æ˜¯ï¼Œåˆ†æä½ çš„é¡¹ç›®ç»“æ„ï¼Œæ‰¾åˆ°JavaScriptæ¨¡å—ä»¥åŠå…¶å®ƒçš„ä¸€äº›æµè§ˆå™¨ä¸èƒ½ç›´æ¥è¿è¡Œçš„æ‹“å±•è¯­è¨€ï¼ˆScssï¼ŒTypeScriptç­‰ï¼‰ï¼Œå¹¶å°†å…¶è½¬æ¢å’Œæ‰“åŒ…ä¸ºåˆé€‚çš„æ ¼å¼ä¾›æµè§ˆå™¨ä½¿ç”¨ã€‚</p>

<h3 id="webpackå’Œgruntä»¥åŠgulpç›¸æ¯”æœ‰ä»€ä¹ˆç‰¹æ€§">WebPackå’ŒGruntä»¥åŠGulpç›¸æ¯”æœ‰ä»€ä¹ˆç‰¹æ€§</h3>

<p>å…¶å®Webpackå’Œå¦å¤–ä¸¤ä¸ªå¹¶æ²¡æœ‰å¤ªå¤šçš„å¯æ¯”æ€§ï¼ŒGulp/Gruntæ˜¯ä¸€ç§èƒ½å¤Ÿä¼˜åŒ–å‰ç«¯çš„å¼€å‘æµç¨‹çš„å·¥å…·ï¼Œè€ŒWebPackæ˜¯ä¸€ç§æ¨¡å—åŒ–çš„è§£å†³æ–¹æ¡ˆï¼Œä¸è¿‡Webpackçš„ä¼˜ç‚¹ä½¿å¾—Webpackåœ¨å¾ˆå¤šåœºæ™¯ä¸‹å¯ä»¥æ›¿ä»£Gulp/Gruntç±»çš„å·¥å…·ã€‚</p>

<p>Gruntå’ŒGulpçš„å·¥ä½œæ–¹å¼æ˜¯ï¼šåœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­ï¼ŒæŒ‡æ˜å¯¹æŸäº›æ–‡ä»¶è¿›è¡Œç±»ä¼¼ç¼–è¯‘ï¼Œç»„åˆï¼Œå‹ç¼©ç­‰ä»»åŠ¡çš„å…·ä½“æ­¥éª¤ï¼Œå·¥å…·ä¹‹åå¯ä»¥è‡ªåŠ¨æ›¿ä½ å®Œæˆè¿™äº›ä»»åŠ¡ã€‚</p>

<p><img src="/images/grunt and gulp.png" alt="" /></p>

<p>Webpackçš„å·¥ä½œæ–¹å¼æ˜¯ï¼šæŠŠä½ çš„é¡¹ç›®å½“åšä¸€ä¸ªæ•´ä½“ï¼Œé€šè¿‡ä¸€ä¸ªç»™å®šçš„ä¸»æ–‡ä»¶ï¼ˆå¦‚ï¼šindex.jsï¼‰ï¼ŒWebpackå°†ä»è¿™ä¸ªæ–‡ä»¶å¼€å§‹æ‰¾åˆ°ä½ çš„é¡¹ç›®çš„æ‰€æœ‰ä¾èµ–æ–‡ä»¶ï¼Œä½¿ç”¨loaderså¤„ç†å®ƒä»¬ï¼Œæœ€åæ‰“åŒ…ä¸ºä¸€ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰æµè§ˆå™¨å¯è¯†åˆ«çš„JavaScriptæ–‡ä»¶ã€‚</p>

<p><img src="/images/webpack.png" alt="" /></p>

<p>å¦‚æœå®åœ¨è¦æŠŠäºŒè€…è¿›è¡Œæ¯”è¾ƒï¼ŒWebpackçš„å¤„ç†é€Ÿåº¦æ›´å¿«æ›´ç›´æ¥ï¼Œèƒ½æ‰“åŒ…æ›´å¤šä¸åŒç±»å‹çš„æ–‡ä»¶ã€‚</p>

<h3 id="å¼€å§‹ä½¿ç”¨webpack">å¼€å§‹ä½¿ç”¨Webpack</h3>

<p>é¦–å…ˆå…¨å±€å®‰è£…</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install -g webpack webpack-cli
</code></pre></div></div>

<p>æœ¬åœ°é¡¹ç›®å®‰è£…</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install webpack webpack-cli
</code></pre></div></div>

<p>webpack4.xçš„æ‰“åŒ…ï¼š</p>

<p>è¿è¡Œwebpack â€“mode developmentæˆ–è€…webpack â€“mode productionï¼Œè¿™æ ·ä¾¿ä¼šé»˜è®¤è¿›è¡Œæ‰“åŒ…ã€‚å…¥å£æ–‡ä»¶æ˜¯â€™./src/index.jsâ€™ï¼Œè¾“å‡ºè·¯å¾„æ˜¯â€™./dist/main.jsâ€™ï¼Œå…¶ä¸­srcç›®å½•å³index.jsæ–‡ä»¶éœ€è¦æ‰‹åŠ¨åˆ›å»ºï¼Œè€Œdistç›®å½•åŠmain.jsä¼šè‡ªåŠ¨ç”Ÿæˆã€‚ å¦‚æœindex.jséœ€è¦ä¾èµ–å…¶ä»–æ–‡ä»¶çš„è¯ï¼Œwebpackä¼šæŠŠä¾èµ–çš„æ–‡ä»¶ä¸€èµ·æ‰“åŒ…ã€‚</p>

<h3 id="ç®€å•ä¾‹å­">ç®€å•ä¾‹å­</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ç›®å½•ç»“æ„
    test/
        dist/
            index.html
        src/
            Greeter.js
            index.js
        package.json

index.html
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Webpack Sample Project<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">'root'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"./main.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>

Greeter.js
// ä¾æ®CommonJSè§„èŒƒå¯¼å‡º
module.exports = function() {
  var greet = document.createElement('div');
  // è¾“å‡ºä¸€ä¸ªé—®å€™ä¿¡æ¯
  greet.textContent = "Hi there and greetings!";
  return greet;
};

index.js
// æŠŠGreeteræ¨¡å—è¿”å›çš„èŠ‚ç‚¹æ’å…¥é¡µé¢
const greeter = require('./Greeter.js');
document.querySelector("#root").appendChild(greeter());
</code></pre></div></div>

<p>åŸºæœ¬ä»£ç å†™å¥½äº†ï¼Œæ¥ä¸‹æ¥æ­£å¼ä½¿ç”¨Webpackï¼Œç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>

<p>è¿è¡Œwebpack â€“mode developmentæˆ–è€…webpack â€“mode production</p>

<p>â€“mode developmentï¼šæ‰“åŒ…ä¸å‹ç¼©</p>

<p>â€“mode productionï¼šæ‰“åŒ…å‹ç¼©</p>

<p>å¯ä»¥çœ‹å‡ºwebpackåŒæ—¶ç¼–è¯‘äº†index.js å’ŒGreeter,js,ç°åœ¨æ‰“å¼€index.html,çœ‹ç»“æœ</p>

<p>å·²ç»æˆåŠŸçš„ä½¿ç”¨Webpackæ‰“åŒ…äº†ä¸€ä¸ªæ–‡ä»¶äº†ã€‚ä¸è¿‡åœ¨ç»ˆç«¯ä¸­è¿›è¡Œå¤æ‚çš„æ“ä½œï¼Œå…¶å®æ˜¯ä¸å¤ªæ–¹ä¾¿ä¸”å®¹æ˜“å‡ºé”™çš„ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹Webpackçš„å¦ä¸€ç§æ›´å¸¸è§çš„ä½¿ç”¨æ–¹æ³•ã€‚</p>

<h3 id="é€šè¿‡é…ç½®æ–‡ä»¶æ¥ä½¿ç”¨webpack">é€šè¿‡é…ç½®æ–‡ä»¶æ¥ä½¿ç”¨Webpack</h3>

<p>Webpackæ‹¥æœ‰å¾ˆå¤šå…¶å®ƒçš„æ¯”è¾ƒé«˜çº§çš„åŠŸèƒ½ï¼ˆæ¯”å¦‚è¯´æœ¬æ–‡åé¢ä¼šä»‹ç»çš„loaderså’Œpluginsï¼‰ï¼Œè¿™äº›åŠŸèƒ½å…¶å®éƒ½å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œæ¨¡å¼å®ç°ï¼Œä½†æ˜¯æ­£å¦‚å‰é¢æåˆ°çš„ï¼Œè¿™æ ·ä¸å¤ªæ–¹ä¾¿ä¸”å®¹æ˜“å‡ºé”™çš„ï¼Œæ›´å¥½çš„åŠæ³•æ˜¯å®šä¹‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªç®€å•çš„JavaScriptæ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰çš„ä¸æ‰“åŒ…ç›¸å…³çš„ä¿¡æ¯æ”¾åœ¨é‡Œé¢ã€‚</p>

<p>ç»§ç»­ä¸Šé¢çš„ä¾‹å­æ¥è¯´æ˜å¦‚ä½•å†™è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œåœ¨å½“å‰ç»ƒä¹ æ–‡ä»¶å¤¹çš„æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåä¸ºwebpack.config.jsçš„æ–‡ä»¶ï¼Œæˆ‘ä»¬åœ¨å…¶ä¸­å†™å…¥å¦‚ä¸‹æ‰€ç¤ºçš„ç®€å•é…ç½®ä»£ç ï¼Œç›®å‰çš„é…ç½®ä¸»è¦æ¶‰åŠåˆ°çš„å†…å®¹æ˜¯å…¥å£æ–‡ä»¶è·¯å¾„å’Œæ‰“åŒ…åæ–‡ä»¶çš„å­˜æ”¾è·¯å¾„ã€‚</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module.exports = {
  entry:  __dirname + "/src/index.js",//å·²å¤šæ¬¡æåŠçš„å”¯ä¸€å…¥å£æ–‡ä»¶
  output: {
    path: __dirname + "/dist",//æ‰“åŒ…åçš„æ–‡ä»¶å­˜æ”¾çš„åœ°æ–¹
    filename: "main.js"//æ‰“åŒ…åè¾“å‡ºæ–‡ä»¶çš„æ–‡ä»¶å
  }
}

æ³¨ï¼šâ€œ__dirnameâ€æ˜¯node.jsä¸­çš„ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå®ƒæŒ‡å‘å½“å‰æ‰§è¡Œè„šæœ¬æ‰€åœ¨çš„ç›®å½•ã€‚
</code></pre></div></div>

<p>æœ‰äº†è¿™ä¸ªé…ç½®ä¹‹åï¼Œå†æ‰“åŒ…æ–‡ä»¶ï¼Œåªéœ€åœ¨ç»ˆç«¯é‡Œè¿è¡Œwebpackï¼Œè¿™æ¡å‘½ä»¤ä¼šè‡ªåŠ¨å¼•ç”¨webpack.config.jsæ–‡ä»¶ä¸­çš„é…ç½®é€‰é¡¹ã€‚</p>

<p>åˆå­¦ä¼šäº†ä¸€ç§ä½¿ç”¨Webpackçš„æ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•ä¸ç”¨ç®¡é‚£çƒ¦äººçš„å‘½ä»¤è¡Œå‚æ•°ã€‚å¦‚æœæˆ‘ä»¬å¯ä»¥è¿webpackè¿™æ¡å‘½ä»¤éƒ½å¯ä»¥ä¸ç”¨ï¼Œé‚£ç§æ„Ÿè§‰ä¼šä¸ä¼šæ›´çˆ½~ã€‚</p>

<h3 id="æ›´å¿«æ·çš„æ‰§è¡Œæ‰“åŒ…ä»»åŠ¡">æ›´å¿«æ·çš„æ‰§è¡Œæ‰“åŒ…ä»»åŠ¡</h3>

<p>åœ¨package.jsonä¸­å¯¹scriptså¯¹è±¡è¿›è¡Œç›¸å…³è®¾ç½®å³å¯ï¼Œè®¾ç½®æ–¹æ³•å¦‚ä¸‹ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "name": "webpack-sample-project",
  "version": "1.0.0",
  "description": "Sample webpack project",
  "scripts": {
    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",
    "dev": "webpack --mode development", // è¿™æ¡å‘½ä»¤æ˜¯æ‰“åŒ…ä¸å‹ç¼©ï¼Œä¸‹é¢é‚£æ¡æ˜¯æ‰“åŒ…å‹ç¼©ã€‚æ³¨ï¼šjsonæ–‡ä»¶é‡Œä¸èƒ½æœ‰æ³¨é‡Š
    "pro": "webpack --mode production"
  },
  "author": "zhang",
  "license": "ISC",
  "devDependencies": {
    "webpack": "3.10.0"
  }
}
</code></pre></div></div>

<p>è„šæœ¬å‘½ä»¤ï¼šnpm run {script name}å¦‚npm run dev</p>

<h3 id="webpackçš„å¼ºå¤§åŠŸèƒ½">Webpackçš„å¼ºå¤§åŠŸèƒ½</h3>

<p>ç”ŸæˆSource Mapsï¼ˆä½¿è°ƒè¯•æ›´å®¹æ˜“ï¼‰</p>

<p>å¼€å‘æ€»æ˜¯ç¦»ä¸å¼€è°ƒè¯•ï¼Œæ–¹ä¾¿çš„è°ƒè¯•èƒ½æå¤§çš„æé«˜å¼€å‘æ•ˆç‡ï¼Œä¸è¿‡æœ‰æ—¶å€™é€šè¿‡æ‰“åŒ…åçš„æ–‡ä»¶ï¼Œä½ æ˜¯ä¸å®¹æ˜“æ‰¾åˆ°å‡ºé”™äº†çš„åœ°æ–¹ï¼Œå¯¹åº”çš„ä½ å†™çš„ä»£ç çš„ä½ç½®çš„ï¼ŒSource Mapså°±æ˜¯æ¥å¸®æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚</p>

<p>é€šè¿‡ç®€å•çš„é…ç½®ï¼Œwebpackå°±å¯ä»¥åœ¨æ‰“åŒ…æ—¶ä¸ºæˆ‘ä»¬ç”Ÿæˆçš„source mapsï¼Œè¿™ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§å¯¹åº”ç¼–è¯‘æ–‡ä»¶å’Œæºæ–‡ä»¶çš„æ–¹æ³•ï¼Œä½¿å¾—ç¼–è¯‘åçš„ä»£ç å¯è¯»æ€§æ›´é«˜ï¼Œä¹Ÿæ›´å®¹æ˜“è°ƒè¯•ã€‚</p>

<p>åœ¨webpackçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®source mapsï¼Œéœ€è¦é…ç½®devtoolï¼Œå®ƒæœ‰ä»¥ä¸‹å››ç§ä¸åŒçš„é…ç½®é€‰é¡¹ï¼Œå„å…·ä¼˜ç¼ºç‚¹ï¼Œæè¿°å¦‚ä¸‹ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>devtoolé€‰é¡¹:
source-map ç»“æœï¼šåœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­äº§ç”Ÿä¸€ä¸ªå®Œæ•´ä¸”åŠŸèƒ½å®Œå…¨çš„æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶å…·æœ‰æœ€å¥½çš„source mapï¼Œä½†æ˜¯å®ƒä¼šå‡æ…¢æ‰“åŒ…é€Ÿåº¦
cheap-module-source-map ç»“æœï¼šåœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ç”Ÿæˆä¸€ä¸ªä¸å¸¦åˆ—æ˜ å°„çš„mapï¼Œä¸å¸¦åˆ—æ˜ å°„æé«˜äº†æ‰“åŒ…é€Ÿåº¦ï¼Œä½†æ˜¯ä¹Ÿä½¿å¾—æµè§ˆå™¨å¼€å‘è€…å·¥å…·åªèƒ½å¯¹åº”åˆ°å…·ä½“çš„è¡Œï¼Œä¸èƒ½å¯¹åº”åˆ°å…·ä½“çš„åˆ—ï¼ˆç¬¦å·ï¼‰ï¼Œä¼šå¯¹è°ƒè¯•é€ æˆä¸ä¾¿
eval-source-map ç»“æœï¼šä½¿ç”¨evalæ‰“åŒ…æºæ–‡ä»¶æ¨¡å—ï¼Œåœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ç”Ÿæˆå¹²å‡€çš„å®Œæ•´çš„source mapã€‚è¿™ä¸ªé€‰é¡¹å¯ä»¥åœ¨ä¸å½±å“æ„å»ºé€Ÿåº¦çš„å‰æä¸‹ç”Ÿæˆå®Œæ•´çš„sourcemapï¼Œä½†æ˜¯å¯¹æ‰“åŒ…åè¾“å‡ºçš„JSæ–‡ä»¶çš„æ‰§è¡Œå…·æœ‰æ€§èƒ½å’Œå®‰å…¨çš„éšæ‚£ã€‚åœ¨å¼€å‘é˜¶æ®µè¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰é¡¹ï¼Œåœ¨ç”Ÿäº§é˜¶æ®µåˆ™ä¸€å®šä¸è¦å¯ç”¨è¿™ä¸ªé€‰é¡¹
cheap-module-eval-source-map ç»“æœï¼šè¿™æ˜¯åœ¨æ‰“åŒ…æ–‡ä»¶æ—¶æœ€å¿«çš„ç”Ÿæˆsource mapçš„æ–¹æ³•ï¼Œç”Ÿæˆçš„Source Map ä¼šå’Œæ‰“åŒ…åçš„JavaScriptæ–‡ä»¶åŒè¡Œæ˜¾ç¤ºï¼Œæ²¡æœ‰åˆ—æ˜ å°„ï¼Œå’Œeval-source-mapé€‰é¡¹å…·æœ‰ç›¸ä¼¼çš„ç¼ºç‚¹
</code></pre></div></div>

<p>æ­£å¦‚ä¸Šè¡¨æ‰€è¿°ï¼Œä¸Šè¿°é€‰é¡¹ç”±ä¸Šåˆ°ä¸‹æ‰“åŒ…é€Ÿåº¦è¶Šæ¥è¶Šå¿«ï¼Œä¸è¿‡åŒæ—¶ä¹Ÿå…·æœ‰è¶Šæ¥è¶Šå¤šçš„è´Ÿé¢ä½œç”¨ï¼Œè¾ƒå¿«çš„æ‰“åŒ…é€Ÿåº¦çš„åæœå°±æ˜¯å¯¹æ‰“åŒ…åçš„æ–‡ä»¶çš„çš„æ‰§è¡Œæœ‰ä¸€å®šå½±å“ã€‚</p>

<p>å¯¹å°åˆ°ä¸­å‹çš„é¡¹ç›®ä¸­ï¼Œeval-source-mapæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰é¡¹ï¼Œå†æ¬¡å¼ºè°ƒä½ åªåº”è¯¥å¼€å‘é˜¶æ®µä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬ç»§ç»­å¯¹ä¸Šæ–‡æ–°å»ºçš„webpack.config.jsï¼Œè¿›è¡Œå¦‚ä¸‹é…ç½®:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module.exports = {
  devtool: 'eval-source-map',
  entry:  __dirname + "/app/main.js",
  output: {
    path: __dirname + "/public",
    filename: "bundle.js"
  }
}
æ³¨æ„ï¼šcheap-module-eval-source-mapæ–¹æ³•æ„å»ºé€Ÿåº¦æ›´å¿«ï¼Œä½†æ˜¯ä¸åˆ©äºè°ƒè¯•ï¼Œæ¨èåœ¨å¤§å‹é¡¹ç›®è€ƒè™‘æ—¶é—´æˆæœ¬æ—¶ä½¿ç”¨ã€‚
</code></pre></div></div>

<p>ä½¿ç”¨webpackæ„å»ºæœ¬åœ°æœåŠ¡å™¨</p>

<p>æƒ³ä¸æƒ³è®©ä½ çš„æµè§ˆå™¨ç›‘å¬ä½ çš„ä»£ç çš„ä¿®æ”¹ï¼Œå¹¶è‡ªåŠ¨åˆ·æ–°æ˜¾ç¤ºä¿®æ”¹åçš„ç»“æœï¼Œå…¶å®Webpackæä¾›ä¸€ä¸ªå¯é€‰çš„æœ¬åœ°å¼€å‘æœåŠ¡å™¨ï¼Œè¿™ä¸ªæœ¬åœ°æœåŠ¡å™¨åŸºäºnode.jsæ„å»ºï¼Œå¯ä»¥å®ç°ä½ æƒ³è¦çš„è¿™äº›åŠŸèƒ½ï¼Œä¸è¿‡å®ƒæ˜¯ä¸€ä¸ªå•ç‹¬çš„ç»„ä»¶ï¼Œåœ¨webpackä¸­è¿›è¡Œé…ç½®ä¹‹å‰éœ€è¦å•ç‹¬å®‰è£…å®ƒä½œä¸ºé¡¹ç›®ä¾èµ–</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install --save-dev webpack-dev-server
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>devserverçš„é…ç½®é€‰é¡¹:
contentBase åŠŸèƒ½æè¿°ï¼šé»˜è®¤webpack-dev-serverä¼šä¸ºæ ¹æ–‡ä»¶å¤¹æä¾›æœ¬åœ°æœåŠ¡å™¨ï¼Œå¦‚æœæƒ³ä¸ºå¦å¤–ä¸€ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶æä¾›æœ¬åœ°æœåŠ¡å™¨ï¼Œåº”è¯¥åœ¨è¿™é‡Œè®¾ç½®å…¶æ‰€åœ¨ç›®å½•ï¼ˆæœ¬ä¾‹è®¾ç½®åˆ°â€œpublic"ç›®å½•ï¼‰
port åŠŸèƒ½æè¿°ï¼šè®¾ç½®é»˜è®¤ç›‘å¬ç«¯å£ï¼Œå¦‚æœçœç•¥ï¼Œé»˜è®¤ä¸ºâ€8080â€œ
inline åŠŸèƒ½æè¿°ï¼šè®¾ç½®ä¸ºtrueï¼Œå½“æºæ–‡ä»¶æ”¹å˜æ—¶ä¼šè‡ªåŠ¨åˆ·æ–°é¡µé¢
historyApiFallback åŠŸèƒ½æè¿°ï¼šåœ¨å¼€å‘å•é¡µåº”ç”¨æ—¶éå¸¸æœ‰ç”¨ï¼Œå®ƒä¾èµ–äºHTML5 history APIï¼Œå¦‚æœè®¾ç½®ä¸ºtrueï¼Œæ‰€æœ‰çš„è·³è½¬å°†æŒ‡å‘index.html
</code></pre></div></div>

<p>æŠŠè¿™äº›å‘½ä»¤åŠ åˆ°webpackçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œç°åœ¨çš„é…ç½®æ–‡ä»¶webpack.config.jså¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module.exports = {
    devtool: 'eval-source-map',
    entry: __dirname + '/src/index.js', // å…¥å£
    output: {
        path: __dirname + '/dist',      // å‡ºå£
        filename: 'main.js'             // å‡ºå£æ–‡ä»¶å
    },
    // webpackçš„æœ¬åœ°å¼€å‘æœåŠ¡å™¨
    devServer: {
        contentBase: "./dist",          // é»˜è®¤ä¸ºæ ¹ç›®å½•æä¾›æœ¬åœ°æœåŠ¡å™¨ï¼Œå¯ä»¥æ‰‹åŠ¨è®¾ç½®
        port: 8080,                     // ç«¯å£
        historyApiFallback: true,       // ä¾èµ–äºHTML5 history APIï¼Œå¦‚æœè®¾ç½®ä¸ºtrueï¼Œæ‰€æœ‰çš„è·³è½¬å°†æŒ‡å‘index.html
        inline: true                    // trueï¼Œå½“æºæ–‡ä»¶æ”¹å˜æ—¶ä¼šè‡ªåŠ¨åˆ·æ–°é¡µé¢
    }
}
</code></pre></div></div>

<p>åœ¨package.jsonä¸­çš„scriptså¯¹è±¡ä¸­æ·»åŠ å¦‚ä¸‹å‘½ä»¤ï¼Œç”¨ä»¥å¼€å¯æœ¬åœ°æœåŠ¡å™¨ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"scripts": {
    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",
    "dev": "webpack --mode development",
    "pro": "webpack --mode production",
    "server": "webpack-dev-server --open"
  }
</code></pre></div></div>

<p>åœ¨ç»ˆç«¯ä¸­è¾“å…¥npm run serverå³å¯åœ¨æœ¬åœ°çš„8080ç«¯å£æŸ¥çœ‹ç»“æœ</p>

<h3 id="loaders">Loaders</h3>

<p>é¼é¼å¤§åçš„Loadersç™»åœºäº†ï¼</p>

<p>Loadersæ˜¯webpackæä¾›çš„æœ€æ¿€åŠ¨äººå¿ƒçš„åŠŸèƒ½ä¹‹ä¸€äº†ã€‚é€šè¿‡ä½¿ç”¨ä¸åŒçš„loaderï¼Œwebpackæœ‰èƒ½åŠ›è°ƒç”¨å¤–éƒ¨çš„è„šæœ¬æˆ–å·¥å…·ï¼Œå®ç°å¯¹ä¸åŒæ ¼å¼çš„æ–‡ä»¶çš„å¤„ç†ï¼Œæ¯”å¦‚è¯´åˆ†æè½¬æ¢scssä¸ºcssï¼Œæˆ–è€…æŠŠä¸‹ä¸€ä»£çš„JSæ–‡ä»¶ï¼ˆES6ï¼ŒES7)è½¬æ¢ä¸ºç°ä»£æµè§ˆå™¨å…¼å®¹çš„JSæ–‡ä»¶ï¼Œå¯¹Reactçš„å¼€å‘è€Œè¨€ï¼Œåˆé€‚çš„Loaderså¯ä»¥æŠŠReactçš„ä¸­ç”¨åˆ°çš„JSXæ–‡ä»¶è½¬æ¢ä¸ºJSæ–‡ä»¶ã€‚</p>

<p>Loaderséœ€è¦å•ç‹¬å®‰è£…å¹¶ä¸”éœ€è¦åœ¨webpack.config.jsä¸­çš„moduleså…³é”®å­—ä¸‹è¿›è¡Œé…ç½®ï¼ŒLoadersçš„é…ç½®åŒ…æ‹¬ä»¥ä¸‹å‡ æ–¹é¢ï¼š</p>

<ol>
  <li>testï¼šä¸€ä¸ªç”¨ä»¥åŒ¹é…loadersæ‰€å¤„ç†æ–‡ä»¶çš„æ‹“å±•åçš„æ­£åˆ™è¡¨è¾¾å¼ï¼ˆå¿…é¡»ï¼‰</li>
  <li>loaderï¼šloaderçš„åç§°ï¼ˆå¿…é¡»ï¼‰</li>
  <li>include/exclude:æ‰‹åŠ¨æ·»åŠ å¿…é¡»å¤„ç†çš„æ–‡ä»¶ï¼ˆæ–‡ä»¶å¤¹ï¼‰æˆ–å±è”½ä¸éœ€è¦å¤„ç†çš„æ–‡ä»¶ï¼ˆæ–‡ä»¶å¤¹ï¼‰ï¼ˆå¯é€‰ï¼‰ï¼›</li>
  <li>queryï¼šä¸ºloadersæä¾›é¢å¤–çš„è®¾ç½®é€‰é¡¹ï¼ˆå¯é€‰ï¼‰</li>
</ol>

<p>ä¸è¿‡åœ¨é…ç½®loaderä¹‹å‰ï¼Œæˆ‘ä»¬æŠŠGreeter.jsé‡Œçš„é—®å€™æ¶ˆæ¯æ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„JSONæ–‡ä»¶é‡Œ,å¹¶é€šè¿‡åˆé€‚çš„é…ç½®ä½¿Greeter.jså¯ä»¥è¯»å–è¯¥JSONæ–‡ä»¶çš„å€¼ï¼Œå„æ–‡ä»¶ä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹ï¼š</p>

<p>åœ¨appæ–‡ä»¶å¤¹ä¸­åˆ›å»ºå¸¦æœ‰é—®å€™ä¿¡æ¯çš„JSONæ–‡ä»¶(å‘½åä¸ºconfig.json)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "greetText": "è¿™é‡Œæ˜¯jsoné‡Œçš„ä¿¡æ¯"
}
</code></pre></div></div>

<p>æ›´æ–°åçš„Greeter.js</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var config = require('./config.json');

module.exports = function() {
  var greet = document.createElement('div');
  greet.textContent = config.greetText;
  return greet;
};
æ³¨ï¼š ç”±äºwebpack3.*/webpack2.*å·²ç»å†…ç½®å¯å¤„ç†JSONæ–‡ä»¶ï¼Œè¿™é‡Œæˆ‘ä»¬æ— éœ€å†æ·»åŠ webpack1.*éœ€è¦çš„json-loaderã€‚åœ¨çœ‹å¦‚ä½•å…·ä½“ä½¿ç”¨loaderä¹‹å‰æˆ‘ä»¬å…ˆçœ‹çœ‹Babelæ˜¯ä»€ä¹ˆï¼Ÿ
</code></pre></div></div>

<h3 id="babel">Babel</h3>

<p>Babelå…¶å®æ˜¯ä¸€ä¸ªç¼–è¯‘JavaScriptçš„å¹³å°ï¼Œå®ƒå¯ä»¥ç¼–è¯‘ä»£ç å¸®ä½ è¾¾åˆ°ä»¥ä¸‹ç›®çš„ï¼š</p>

<ol>
  <li>è®©ä½ èƒ½ä½¿ç”¨æœ€æ–°çš„JavaScriptä»£ç ï¼ˆES6ï¼ŒES7â€¦ï¼‰ï¼Œè€Œä¸ç”¨ç®¡æ–°æ ‡å‡†æ˜¯å¦è¢«å½“å‰ä½¿ç”¨çš„æµè§ˆå™¨å®Œå…¨æ”¯æŒï¼›</li>
  <li>è®©ä½ èƒ½ä½¿ç”¨åŸºäºJavaScriptè¿›è¡Œäº†æ‹“å±•çš„è¯­è¨€ï¼Œæ¯”å¦‚Reactçš„JSXï¼›</li>
</ol>

<h3 id="babelçš„å®‰è£…ä¸é…ç½®">Babelçš„å®‰è£…ä¸é…ç½®</h3>

<p>Babelå…¶å®æ˜¯å‡ ä¸ªæ¨¡å—åŒ–çš„åŒ…ï¼Œå…¶æ ¸å¿ƒåŠŸèƒ½ä½äºç§°ä¸ºbabel-coreçš„npmåŒ…ä¸­ï¼Œwebpackå¯ä»¥æŠŠå…¶ä¸åŒçš„åŒ…æ•´åˆåœ¨ä¸€èµ·ä½¿ç”¨ï¼Œå¯¹äºæ¯ä¸€ä¸ªä½ éœ€è¦çš„åŠŸèƒ½æˆ–æ‹“å±•ï¼Œä½ éƒ½éœ€è¦å®‰è£…å•ç‹¬çš„åŒ…ï¼ˆç”¨å¾—æœ€å¤šçš„æ˜¯è§£æEs6çš„babel-env-presetåŒ…å’Œè§£æJSXçš„babel-preset-reactåŒ…ï¼‰ã€‚</p>

<p>æˆ‘ä»¬å…ˆæ¥ä¸€æ¬¡æ€§å®‰è£…è¿™äº›ä¾èµ–åŒ…</p>

<p>// npmä¸€æ¬¡æ€§å®‰è£…å¤šä¸ªä¾èµ–æ¨¡å—ï¼Œæ¨¡å—ä¹‹é—´ç”¨ç©ºæ ¼éš”å¼€
npm install â€“save-dev babel-core babel-loader babel-preset-env babel-preset-react</p>

<p>babel-loaderä½œä¸ºwebpackçš„loaderçš„ä¸€ç§ï¼Œä½œç”¨åŒå…¶ä»–loaderä¸€æ ·ï¼Œå®ç°å¯¹ç‰¹å®šæ–‡ä»¶ç±»å‹çš„å¤„ç†ã€‚</p>

<p>babel-coreçš„ä½œç”¨åœ¨äºæä¾›ä¸€ç³»åˆ—apiã€‚è¿™ä¾¿æ˜¯è¯´ï¼Œå½“webpackä½¿ç”¨babel-loaderå¤„ç†æ–‡ä»¶æ—¶ï¼Œbabel-loaderå®é™…ä¸Šè°ƒç”¨äº†babel-coreçš„apiï¼Œå› æ­¤ä¹Ÿå¿…é¡»å®‰è£…babel-core</p>

<p>babel-preset-envçš„ä½œç”¨æ˜¯å‘Šè¯‰babelä½¿ç”¨å“ªç§è½¬ç è§„åˆ™è¿›è¡Œæ–‡ä»¶å¤„ç†ã€‚äº‹å®ä¸Šï¼Œbabelæœ‰å‡ ç§è§„åˆ™éƒ½å¯ä»¥å®ç°å¯¹ES6è¯­æ³•çš„è½¬ç ï¼Œå¦‚babel-preset-es2015ã€babel-preset-latestã€babel-preset-envï¼Œä¸è¿‡å®˜æ–¹ç°å·²å»ºè®®é‡‡ç”¨babel-preset-envï¼Œæœ¬æ–‡ä¹Ÿå°†é‡‡ç”¨babel-preset-envï¼Œä½ å¯ä»¥é€šè¿‡å®˜ç½‘äº†è§£å‡ ç§è§„åˆ™çš„åŒºåˆ«ã€‚åŒæ ·åœ¨å‘½ä»¤è¡Œä¸­å®šä½åˆ°é¡¹ç›®æ ¹ç›®å½•ï¼Œè¾“å…¥ä»¥ä¸‹æŒ‡ä»¤è¿›è¡Œå®‰è£…</p>

<p>åœ¨webpackä¸­é…ç½®Babelçš„æ–¹æ³•å¦‚ä¸‹:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>const path = require('path');

module.exports = {
    // å…¥å£
    entry: __dirname + '/src/index.js', 
    // å‡ºå£
    output: {
         // å‡ºå£åœ°å€
        path: __dirname + '/dist',      
        // å‡ºå£æ–‡ä»¶å
        filename: 'main.js'            
    },
    // è°ƒè¯•å™¨
    devtool: 'eval-source-map',         
    // webpackçš„æœ¬åœ°å¼€å‘æœåŠ¡å™¨
    devServer: {
        contentBase: "./dist",          // é»˜è®¤ä¸ºæ ¹ç›®å½•æä¾›æœ¬åœ°æœåŠ¡å™¨ï¼Œå¯ä»¥æ‰‹åŠ¨è®¾ç½®
        port: 8080,                     // ç«¯å£
        historyApiFallback: true,       // ä¾èµ–äºHTML5 history APIï¼Œå¦‚æœè®¾ç½®ä¸ºtrueï¼Œæ‰€æœ‰çš„è·³è½¬å°†æŒ‡å‘index.html
        inline: true                    // trueï¼Œå½“æºæ–‡ä»¶æ”¹å˜æ—¶ä¼šè‡ªåŠ¨åˆ·æ–°é¡µé¢
    },
    // æ¨¡å—é…ç½®
    module: {
        
        // é¢„å¤„ç†(loader)

        rules: [            
            {
                test: /(\.jsx|\.js)$/,    // åŒ¹é…æ¡ä»¶                
                exclude: [ path.resolve(__dirname, "node_modules") ],    // åŒ¹é…æ—¶å¿½ç•¥è¿™ä¸ªç›®å½•ï¼Œæé«˜æ‰“åŒ…é€Ÿåº¦
                include: [ path.resolve(__dirname, "src") ],             // åŒ¹é…æ—¶æŸ¥æ‰¾çš„èŒƒå›´                
                use: {
                    loader: "babel-loader",   // ä½¿ç”¨çš„é¢„å¤„ç†
                    // å¯ä»¥ä½¿ç”¨optionsç»™loaderæ·»åŠ å‚æ•°
                    options: {
                        presets: ['env','react']
                    },
                }
            }
        ]
    }

}
</code></pre></div></div>

<p>ç°åœ¨ä½ çš„webpackçš„é…ç½®å·²ç»å…è®¸ä½ ä½¿ç”¨ES6ä»¥åŠJSXçš„è¯­æ³•äº†ã€‚ç»§ç»­ç”¨ä¸Šé¢çš„ä¾‹å­è¿›è¡Œæµ‹è¯•ï¼Œä¸è¿‡è¿™æ¬¡æˆ‘ä»¬ä¼šä½¿ç”¨Reactï¼Œè®°å¾—å…ˆå®‰è£… React å’Œ React-DOM</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install --save react react-dom
</code></pre></div></div>

<p>æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ES6çš„è¯­æ³•ï¼Œæ›´æ–°Greeter.jså¹¶è¿”å›ä¸€ä¸ªReactç»„ä»¶</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// å£°æ˜reactç»„ä»¶
import React, {Component} from 'react';
// å¯¼å…¥jsonæ•°æ®
import config from './config.json';

// ä¸€ä¸ªç®€å•çš„reactç»„ä»¶
class Greeter extends Component{
  // ç»„ä»¶å®šä¹‰ä¸€ä¸ªdivä¿å­˜jsonæ•°æ®
  render(){
    return (
      &lt;div&gt;
        {config.greetText}
      &lt;/div&gt;
    );
  }
}

// å¯¼å‡ºç»„ä»¶
export default Greeter 

</code></pre></div></div>

<p>ä¿®æ”¹main.jså¦‚ä¸‹ï¼Œä½¿ç”¨ES6çš„æ¨¡å—å®šä¹‰å’Œæ¸²æŸ“Greeteræ¨¡å—</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  import React from 'react';
  import {render} from 'react-dom';
  // å¯¼å…¥Greeter
  import Greeter from './Greeter';

  // æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢
  render(&lt;Greeter/&gt;, document.getElementById('root'));

</code></pre></div></div>

<p>é‡æ–°ä½¿ç”¨npm startæ‰“åŒ…ï¼Œå¦‚æœä¹‹å‰æ‰“å¼€çš„æœ¬åœ°æœåŠ¡å™¨æ²¡æœ‰å…³é—­ï¼Œä½ åº”è¯¥å¯ä»¥åœ¨localhost:8080ä¸‹çœ‹åˆ°ä¸ä¹‹å‰ä¸€æ ·çš„å†…å®¹ï¼Œè¿™è¯´æ˜reactå’Œes6è¢«æ­£å¸¸æ‰“åŒ…äº†ã€‚</p>

<h3 id="babelçš„é…ç½®">Babelçš„é…ç½®</h3>

<p>Babelå…¶å®å¯ä»¥å®Œå…¨åœ¨ webpack.config.js ä¸­è¿›è¡Œé…ç½®ï¼Œä½†æ˜¯è€ƒè™‘åˆ°babelå…·æœ‰éå¸¸å¤šçš„é…ç½®é€‰é¡¹ï¼Œåœ¨å•ä¸€çš„webpack.config.jsæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®å¾€å¾€ä½¿å¾—è¿™ä¸ªæ–‡ä»¶æ˜¾å¾—å¤ªå¤æ‚ï¼Œå› æ­¤ä¸€äº›å¼€å‘è€…æ”¯æŒæŠŠbabelçš„é…ç½®é€‰é¡¹æ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„åä¸º â€œ.babelrcâ€ çš„é…ç½®æ–‡ä»¶ä¸­ã€‚æˆ‘ä»¬ç°åœ¨çš„babelçš„é…ç½®å¹¶ä¸ç®—å¤æ‚ï¼Œä¸è¿‡ä¹‹åæˆ‘ä»¬ä¼šå†åŠ ä¸€äº›ä¸œè¥¿ï¼Œå› æ­¤ç°åœ¨æˆ‘ä»¬å°±æå–å‡ºç›¸å…³éƒ¨åˆ†ï¼Œåˆ†ä¸¤ä¸ªé…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®ï¼ˆwebpackä¼šè‡ªåŠ¨è°ƒç”¨.babelrcé‡Œçš„babelé…ç½®é€‰é¡¹ï¼‰ï¼Œå¦‚ä¸‹ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module.exports = {
    entry: __dirname + "/app/main.js",//å·²å¤šæ¬¡æåŠçš„å”¯ä¸€å…¥å£æ–‡ä»¶
    output: {
        path: __dirname + "/public",//æ‰“åŒ…åçš„æ–‡ä»¶å­˜æ”¾çš„åœ°æ–¹
        filename: "bundle.js"//æ‰“åŒ…åè¾“å‡ºæ–‡ä»¶çš„æ–‡ä»¶å
    },
    devtool: 'eval-source-map',
    devServer: {
        contentBase: "./public",//æœ¬åœ°æœåŠ¡å™¨æ‰€åŠ è½½çš„é¡µé¢æ‰€åœ¨çš„ç›®å½•
        historyApiFallback: true,//ä¸è·³è½¬
        inline: true//å®æ—¶åˆ·æ–°
    },
    module: {
        rules: [
            {
                test: /(\.jsx|\.js)$/,
                use: {
                    loader: "babel-loader"
                },
                exclude: /node_modules/
            }
        ]
    }
};
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//.babelrc
{
  "presets": ["react", "env"]
}
</code></pre></div></div>

<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†ï¼Œå¯¹äºæ¨¡å—ï¼ŒWebpackèƒ½æä¾›éå¸¸å¼ºå¤§çš„å¤„ç†åŠŸèƒ½ï¼Œé‚£é‚£äº›æ˜¯æ¨¡å—å‘¢ã€‚</p>

<h3 id="ä¸€åˆ‡çš†æ¨¡å—">ä¸€åˆ‡çš†æ¨¡å—</h3>

<p>Webpackæœ‰ä¸€ä¸ªä¸å¯ä¸è¯´çš„ä¼˜ç‚¹ï¼Œå®ƒæŠŠæ‰€æœ‰çš„æ–‡ä»¶éƒ½éƒ½å½“åšæ¨¡å—å¤„ç†ï¼ŒJavaScriptä»£ç ï¼ŒCSSå’Œfontsä»¥åŠå›¾ç‰‡ç­‰ç­‰é€šè¿‡åˆé€‚çš„loaderéƒ½å¯ä»¥è¢«å¤„ç†ã€‚</p>

<p>CSS</p>

<p>webpackæä¾›ä¸¤ä¸ªå·¥å…·å¤„ç†æ ·å¼è¡¨ï¼Œcss-loader å’Œ style-loaderï¼ŒäºŒè€…å¤„ç†çš„ä»»åŠ¡ä¸åŒï¼Œcss-loaderä½¿ä½ èƒ½å¤Ÿä½¿ç”¨ç±»ä¼¼@import å’Œ url(â€¦)çš„æ–¹æ³•å®ç° require()çš„åŠŸèƒ½,style-loaderå°†æ‰€æœ‰çš„è®¡ç®—åçš„æ ·å¼åŠ å…¥é¡µé¢ä¸­ï¼ŒäºŒè€…ç»„åˆåœ¨ä¸€èµ·ä½¿ä½ èƒ½å¤ŸæŠŠæ ·å¼è¡¨åµŒå…¥webpackæ‰“åŒ…åçš„JSæ–‡ä»¶ä¸­ã€‚</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//å®‰è£…
npm install --save-dev style-loader css-loader
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//ä½¿ç”¨
module.exports = {

   ...
    module: {
        rules: [
            {
                test: /(\.jsx|\.js)$/,
                use: {
                    loader: "babel-loader"
                },
                exclude: /node_modules/
            },
            {
                test: /\.css$/,
                use: [
                    {
                        loader: "style-loader"
                    }, {
                        loader: "css-loader"
                    }
                ]
            }
        ]
    }
};

è¯·æ³¨æ„è¿™é‡Œå¯¹åŒä¸€ä¸ªæ–‡ä»¶å¼•å…¥å¤šä¸ªloaderçš„æ–¹æ³•ã€‚
</code></pre></div></div>

<p>æ¥ä¸‹æ¥ï¼Œåœ¨srcæ–‡ä»¶å¤¹é‡Œåˆ›å»ºä¸€ä¸ªåå­—ä¸ºâ€main.cssâ€çš„æ–‡ä»¶ï¼Œå¯¹ä¸€äº›å…ƒç´ è®¾ç½®æ ·å¼</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/* main.css */
html {
  box-sizing: border-box;
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
}

*, *:before, *:after {
  box-sizing: inherit;
}

body {
  margin: 0;
  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
}

h1, h2, h3, h4, h5, h6, p, ul {
  margin: 0;
  padding: 0;
}
</code></pre></div></div>

<p>æˆ‘ä»¬è¿™é‡Œä¾‹å­ä¸­ç”¨åˆ°çš„webpackåªæœ‰å•ä¸€çš„å…¥å£ï¼Œå…¶å®ƒçš„æ¨¡å—éœ€è¦é€šè¿‡ import, require, urlç­‰ä¸å…¥å£æ–‡ä»¶å»ºç«‹å…¶å…³è”ï¼Œä¸ºäº†è®©webpackèƒ½æ‰¾åˆ°â€main.cssâ€œæ–‡ä»¶ï¼Œæˆ‘ä»¬æŠŠå®ƒå¯¼å…¥â€index.js â€œä¸­ï¼Œå¦‚ä¸‹:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//index.js
import React from 'react';
import {render} from 'react-dom';
import Greeter from './Greeter';

import './main.css';//ä½¿ç”¨requireå¯¼å…¥cssæ–‡ä»¶

render(&lt;Greeter /&gt;, document.getElementById('root'));

//é€šå¸¸æƒ…å†µä¸‹ï¼Œcssä¼šå’Œjsæ‰“åŒ…åˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå¹¶ä¸ä¼šæ‰“åŒ…ä¸ºä¸€ä¸ªå•ç‹¬çš„cssæ–‡ä»¶ï¼Œä¸è¿‡é€šè¿‡åˆé€‚çš„é…ç½®webpackä¹Ÿå¯ä»¥æŠŠcssæ‰“åŒ…ä¸ºå•ç‹¬çš„æ–‡ä»¶çš„ã€‚
</code></pre></div></div>

<p>ä¸Šé¢çš„ä»£ç è¯´æ˜webpackæ˜¯æ€ä¹ˆæŠŠcsså½“åšæ¨¡å—çœ‹å¾…çš„ï¼Œå’±ä»¬ç»§ç»­çœ‹ä¸€ä¸ªæ›´åŠ çœŸå®çš„cssæ¨¡å—å®è·µã€‚</p>

<h3 id="css-module">CSS module</h3>

<p>åœ¨è¿‡å»çš„ä¸€äº›å¹´é‡Œï¼ŒJavaScripté€šè¿‡ä¸€äº›æ–°çš„è¯­è¨€ç‰¹æ€§ï¼Œæ›´å¥½çš„å·¥å…·ä»¥åŠæ›´å¥½çš„å®è·µæ–¹æ³•ï¼ˆæ¯”å¦‚è¯´æ¨¡å—åŒ–ï¼‰å‘å±•å¾—éå¸¸è¿…é€Ÿã€‚æ¨¡å—ä½¿å¾—å¼€å‘è€…æŠŠå¤æ‚çš„ä»£ç è½¬åŒ–ä¸ºå°çš„ï¼Œå¹²å‡€çš„ï¼Œä¾èµ–å£°æ˜æ˜ç¡®çš„å•å…ƒï¼Œé…åˆä¼˜åŒ–å·¥å…·ï¼Œä¾èµ–ç®¡ç†å’ŒåŠ è½½ç®¡ç†å¯ä»¥è‡ªåŠ¨å®Œæˆã€‚</p>

<p>ä¸è¿‡å‰ç«¯çš„å¦å¤–ä¸€éƒ¨åˆ†ï¼ŒCSSå‘å±•å°±ç›¸å¯¹æ…¢ä¸€äº›ï¼Œå¤§å¤šçš„æ ·å¼è¡¨å´ä¾æ—§å·¨å¤§ä¸”å……æ»¡äº†å…¨å±€ç±»åï¼Œç»´æŠ¤å’Œä¿®æ”¹éƒ½éå¸¸å›°éš¾ã€‚</p>

<p>è¢«ç§°ä¸ºCSS modulesçš„æŠ€æœ¯æ„åœ¨æŠŠJSçš„æ¨¡å—åŒ–æ€æƒ³å¸¦å…¥CSSä¸­æ¥ï¼Œé€šè¿‡CSSæ¨¡å—ï¼Œæ‰€æœ‰çš„ç±»åï¼ŒåŠ¨ç”»åé»˜è®¤éƒ½åªä½œç”¨äºå½“å‰æ¨¡å—ã€‚Webpackå¯¹CSSæ¨¡å—åŒ–æä¾›äº†éå¸¸å¥½çš„æ”¯æŒï¼Œåªéœ€è¦åœ¨CSS loaderä¸­è¿›è¡Œç®€å•é…ç½®å³å¯ï¼Œç„¶åå°±å¯ä»¥ç›´æ¥æŠŠCSSçš„ç±»åä¼ é€’åˆ°ç»„ä»¶çš„ä»£ç ä¸­ï¼Œè¿™æ ·åšæœ‰æ•ˆé¿å…äº†å…¨å±€æ±¡æŸ“ã€‚å…·ä½“çš„ä»£ç å¦‚ä¸‹:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module.exports = {

    ...

    module: {
        rules: [
            {
                test: /(\.jsx|\.js)$/,
                use: {
                    loader: "babel-loader"
                },
                exclude: /node_modules/
            },
            {
                test: /\.css$/,
                use: [
                    {
                        loader: "style-loader"
                    }, {
                        loader: "css-loader",
                        options: {
                            modules: true, // æŒ‡å®šå¯ç”¨css modules
                            localIdentName: '[name]__[local]--[hash:base64:5]' // æŒ‡å®šcssçš„ç±»åæ ¼å¼
                        }
                    }
                ]
            }
        ]
    }
};
</code></pre></div></div>

<p>æˆ‘ä»¬åœ¨appæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªGreeter.cssæ–‡ä»¶æ¥è¿›è¡Œä¸€ä¸‹æµ‹è¯•</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.root {
  background-color: #eee;
  padding: 10px;
  border: 3px solid #ccc;
}
</code></pre></div></div>

<p>å¯¼å…¥.rootåˆ°Greeter.jsä¸­</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import React, {Component} from 'react';
import config from './config.json';
import styles from './Greeter.css';//å¯¼å…¥

class Greeter extends Component{
  render() {
    return (
      &lt;div className={styles.root}&gt; //ä½¿ç”¨cssModuleæ·»åŠ ç±»åçš„æ–¹æ³•
        {config.greetText}
      &lt;/div&gt;
    );
  }
}

export default Greeter
</code></pre></div></div>

<p>æ”¾å¿ƒä½¿ç”¨æŠŠï¼Œç›¸åŒçš„ç±»åä¹Ÿä¸ä¼šé€ æˆä¸åŒç»„ä»¶ä¹‹é—´çš„æ±¡æŸ“ã€‚</p>

<p>CSS modules ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„ä¸»é¢˜ï¼Œæœ‰å…´è¶£çš„è¯å¯ä»¥å»å…¶<a href="https://github.com/css-modules/css-modules">å®˜æ–¹æ–‡æ¡£</a>äº†è§£æ›´å¤šã€‚</p>

<h3 id="cssé¢„å¤„ç†å™¨">CSSé¢„å¤„ç†å™¨</h3>

<p>Sass å’Œ Less ä¹‹ç±»çš„é¢„å¤„ç†å™¨æ˜¯å¯¹åŸç”ŸCSSçš„æ‹“å±•ï¼Œå®ƒä»¬å…è®¸ä½ ä½¿ç”¨ç±»ä¼¼äºvariables, nesting, mixins, inheritanceç­‰ä¸å­˜åœ¨äºCSSä¸­çš„ç‰¹æ€§æ¥å†™CSSï¼ŒCSSé¢„å¤„ç†å™¨å¯ä»¥è¿™äº›ç‰¹æ®Šç±»å‹çš„è¯­å¥è½¬åŒ–ä¸ºæµè§ˆå™¨å¯è¯†åˆ«çš„CSSè¯­å¥ï¼Œ</p>

<p>ä½ ç°åœ¨å¯èƒ½éƒ½å·²ç»ç†Ÿæ‚‰äº†ï¼Œåœ¨webpacké‡Œä½¿ç”¨ç›¸å…³loadersè¿›è¡Œé…ç½®å°±å¯ä»¥ä½¿ç”¨äº†ï¼Œä»¥ä¸‹æ˜¯å¸¸ç”¨çš„CSS å¤„ç†loaders:</p>

<ol>
  <li>Less Loader</li>
  <li>Sass Loader</li>
  <li>Stylus Loader</li>
</ol>

<p>ä¸è¿‡å…¶å®ä¹Ÿå­˜åœ¨ä¸€ä¸ªCSSçš„å¤„ç†å¹³å°-PostCSSï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ çš„CSSå®ç°æ›´å¤šçš„åŠŸèƒ½ï¼Œåœ¨å…¶<a href="https://github.com/postcss/postcss">å®˜æ–¹æ–‡æ¡£</a>å¯äº†è§£æ›´å¤šç›¸å…³çŸ¥è¯†ã€‚</p>

<p>ä¸¾ä¾‹æ¥è¯´å¦‚ä½•ä½¿ç”¨PostCSSï¼Œæˆ‘ä»¬ä½¿ç”¨PostCSSæ¥ä¸ºCSSä»£ç è‡ªåŠ¨æ·»åŠ é€‚åº”ä¸åŒæµè§ˆå™¨çš„CSSå‰ç¼€ã€‚</p>

<p>é¦–å…ˆå®‰è£…postcss-loader å’Œ autoprefixerï¼ˆè‡ªåŠ¨æ·»åŠ å‰ç¼€çš„æ’ä»¶ï¼‰</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install --save-dev postcss-loader autoprefixer
</code></pre></div></div>

<p>æ¥ä¸‹æ¥ï¼Œåœ¨webpacké…ç½®æ–‡ä»¶ä¸­æ·»åŠ postcss-loaderï¼Œåœ¨æ ¹ç›®å½•æ–°å»ºpostcss.config.js,å¹¶æ·»åŠ å¦‚ä¸‹ä»£ç ä¹‹åï¼Œé‡æ–°ä½¿ç”¨npm startæ‰“åŒ…æ—¶ï¼Œä½ å†™çš„cssä¼šè‡ªåŠ¨æ ¹æ®Can i useé‡Œçš„æ•°æ®æ·»åŠ ä¸åŒå‰ç¼€äº†ã€‚</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//webpack.config.js
module.exports = {
    ...
    module: {
        rules: [
            {
                test: /(\.jsx|\.js)$/,
                use: {
                    loader: "babel-loader"
                },
                exclude: /node_modules/
            },
            {
                test: /\.css$/,
                use: [
                    {
                        loader: "style-loader"
                    }, {
                        loader: "css-loader",
                        options: {
                            modules: true
                        }
                    }, {
                        loader: "postcss-loader"
                    }
                ]
            }
        ]
    }
}
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// postcss.config.js
module.exports = {
    plugins: [
        require('autoprefixer')
    ]
}
</code></pre></div></div>

<p>è‡³æ­¤ï¼Œæœ¬æ–‡å·²ç»è°ˆè®ºäº†å¤„ç†JSçš„Babelå’Œå¤„ç†CSSçš„PostCSSçš„åŸºæœ¬ç”¨æ³•ï¼Œå®ƒä»¬å…¶å®ä¹Ÿæ˜¯ä¸¤ä¸ªå•ç‹¬çš„å¹³å°ï¼Œé…åˆwebpackå¯ä»¥å¾ˆå¥½çš„å‘æŒ¥å®ƒä»¬çš„ä½œç”¨ã€‚æ¥ä¸‹æ¥ä»‹ç»Webpackä¸­å¦ä¸€ä¸ªéå¸¸é‡è¦çš„åŠŸèƒ½-Plugins</p>

<h3 id="æ’ä»¶plugins">æ’ä»¶ï¼ˆPluginsï¼‰</h3>

<p>æ’ä»¶ï¼ˆPluginsï¼‰æ˜¯ç”¨æ¥æ‹“å±•WebpackåŠŸèƒ½çš„ï¼Œå®ƒä»¬ä¼šåœ¨æ•´ä¸ªæ„å»ºè¿‡ç¨‹ä¸­ç”Ÿæ•ˆï¼Œæ‰§è¡Œç›¸å…³çš„ä»»åŠ¡ã€‚</p>

<p>Loaderså’ŒPluginså¸¸å¸¸è¢«å¼„æ··ï¼Œä½†æ˜¯ä»–ä»¬å…¶å®æ˜¯å®Œå…¨ä¸åŒçš„ä¸œè¥¿ï¼Œå¯ä»¥è¿™ä¹ˆæ¥è¯´ï¼Œloadersæ˜¯åœ¨æ‰“åŒ…æ„å»ºè¿‡ç¨‹ä¸­ç”¨æ¥å¤„ç†æºæ–‡ä»¶çš„ï¼ˆJSXï¼ŒScssï¼ŒLess..ï¼‰ï¼Œä¸€æ¬¡å¤„ç†ä¸€ä¸ªï¼Œæ’ä»¶å¹¶ä¸ç›´æ¥æ“ä½œå•ä¸ªæ–‡ä»¶ï¼Œå®ƒç›´æ¥å¯¹æ•´ä¸ªæ„å»ºè¿‡ç¨‹å…¶ä½œç”¨ã€‚</p>

<p>Webpackæœ‰å¾ˆå¤šå†…ç½®æ’ä»¶ï¼ŒåŒæ—¶ä¹Ÿæœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œå¯ä»¥è®©æˆ‘ä»¬å®Œæˆæ›´åŠ ä¸°å¯Œçš„åŠŸèƒ½ã€‚</p>

<h3 id="ä½¿ç”¨æ’ä»¶çš„æ–¹æ³•">ä½¿ç”¨æ’ä»¶çš„æ–¹æ³•</h3>

<p>è¦ä½¿ç”¨æŸä¸ªæ’ä»¶ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡npmå®‰è£…å®ƒï¼Œç„¶åè¦åšçš„å°±æ˜¯åœ¨webpacké…ç½®ä¸­çš„pluginså…³é”®å­—éƒ¨åˆ†æ·»åŠ è¯¥æ’ä»¶çš„ä¸€ä¸ªå®ä¾‹ï¼ˆpluginsæ˜¯ä¸€ä¸ªæ•°ç»„ï¼‰ç»§ç»­ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªç»™æ‰“åŒ…åä»£ç æ·»åŠ ç‰ˆæƒå£°æ˜çš„æ’ä»¶ã€‚</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>const webpack = require('webpack');

module.exports = {
...
    module: {
        rules: [
            {
                test: /(\.jsx|\.js)$/,
                use: {
                    loader: "babel-loader"
                },
                exclude: /node_modules/
            },
            {
                test: /\.css$/,
                use: [
                    {
                        loader: "style-loader"
                    }, {
                        loader: "css-loader",
                        options: {
                            modules: true
                        }
                    }, {
                        loader: "postcss-loader"
                    }
                ]
            }
        ]
    },
    plugins: [
        new webpack.BannerPlugin('ç‰ˆæƒæ‰€æœ‰ï¼Œç¿»ç‰ˆå¿…ç©¶')
    ],
};
</code></pre></div></div>

<p>é€šè¿‡è¿™ä¸ªæ’ä»¶ï¼Œæ‰“åŒ…åçš„JSæ–‡ä»¶ä¼šæ˜¾ç¤ºæŒ‡å®šç‰ˆæƒä¿¡æ¯</p>

<p>è¿™å°±æ˜¯webpackæ’ä»¶çš„åŸºç¡€ç”¨æ³•äº†ï¼Œä¸‹é¢ç»™å¤§å®¶æ¨èå‡ ä¸ªå¸¸ç”¨çš„æ’ä»¶</p>

<h3 id="htmlwebpackplugin">HtmlWebpackPlugin</h3>

<p>è¿™ä¸ªæ’ä»¶çš„ä½œç”¨æ˜¯ä¾æ®ä¸€ä¸ªç®€å•çš„index.htmlæ¨¡æ¿ï¼Œç”Ÿæˆä¸€ä¸ªè‡ªåŠ¨å¼•ç”¨ä½ æ‰“åŒ…åçš„JSæ–‡ä»¶çš„æ–°index.htmlã€‚è¿™åœ¨æ¯æ¬¡ç”Ÿæˆçš„jsæ–‡ä»¶åç§°ä¸åŒæ—¶éå¸¸æœ‰ç”¨ï¼ˆæ¯”å¦‚æ·»åŠ äº†hashå€¼ï¼‰ã€‚</p>

<p>è¿™ä¸ªæ’ä»¶è‡ªåŠ¨å®Œæˆäº†æˆ‘ä»¬ä¹‹å‰æ‰‹åŠ¨åšçš„ä¸€äº›äº‹æƒ…ï¼Œåœ¨æ­£å¼ä½¿ç”¨ä¹‹å‰éœ€è¦å¯¹ä¸€ç›´ä»¥æ¥çš„é¡¹ç›®ç»“æ„åšä¸€äº›æ›´æ”¹ï¼š</p>

<p>ç§»é™¤publicæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨æ­¤æ’ä»¶ï¼Œindex.htmlæ–‡ä»¶ä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œæ­¤å¤–CSSå·²ç»é€šè¿‡å‰é¢çš„æ“ä½œæ‰“åŒ…åˆ°JSä¸­äº†ã€‚
åœ¨appç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªindex.tmpl.htmlæ–‡ä»¶æ¨¡æ¿ï¼Œè¿™ä¸ªæ¨¡æ¿åŒ…å«titleç­‰å¿…é¡»å…ƒç´ ï¼Œåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œæ’ä»¶ä¼šä¾æ®æ­¤æ¨¡æ¿ç”Ÿæˆæœ€ç»ˆçš„htmlé¡µé¢ï¼Œä¼šè‡ªåŠ¨æ·»åŠ æ‰€ä¾èµ–çš„ css, jsï¼Œfaviconç­‰æ–‡ä»¶ï¼Œindex.tmpl.htmlä¸­çš„æ¨¡æ¿æºä»£ç å¦‚ä¸‹ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>å®‰è£…
npm install --save-dev html-webpack-plugin
</code></pre></div></div>

<p>è¿™ä¸ªæ’ä»¶è‡ªåŠ¨å®Œæˆäº†æˆ‘ä»¬ä¹‹å‰æ‰‹åŠ¨åšçš„ä¸€äº›äº‹æƒ…ï¼Œåœ¨æ­£å¼ä½¿ç”¨ä¹‹å‰éœ€è¦å¯¹ä¸€ç›´ä»¥æ¥çš„é¡¹ç›®ç»“æ„åšä¸€äº›æ›´æ”¹ï¼š</p>

<ol>
  <li>ç§»é™¤publicæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨æ­¤æ’ä»¶ï¼Œindex.htmlæ–‡ä»¶ä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œæ­¤å¤–CSSå·²ç»é€šè¿‡å‰é¢çš„æ“ä½œæ‰“åŒ…åˆ°JSä¸­äº†ã€‚</li>
  <li>åœ¨srcç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªindex.tmpl.htmlæ–‡ä»¶æ¨¡æ¿ï¼Œè¿™ä¸ªæ¨¡æ¿åŒ…å«titleç­‰å¿…é¡»å…ƒç´ ï¼Œåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œæ’ä»¶ä¼šä¾æ®æ­¤æ¨¡æ¿ç”Ÿæˆæœ€ç»ˆçš„htmlé¡µé¢ï¼Œä¼šè‡ªåŠ¨æ·»åŠ æ‰€ä¾èµ–çš„ css, jsï¼Œfaviconç­‰æ–‡ä»¶ï¼Œindex.tmpl.htmlä¸­çš„æ¨¡æ¿æºä»£ç å¦‚ä¸‹ï¼š</li>
</ol>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Webpack Sample Project<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">'root'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>
<ol>
  <li>æ›´æ–°webpackçš„é…ç½®æ–‡ä»¶ï¼Œæ–¹æ³•åŒä¸Š,æ–°å»ºä¸€ä¸ªbuildæ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾æœ€ç»ˆçš„è¾“å‡ºæ–‡ä»¶</li>
</ol>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>const webpack = require('webpack');
const HtmlWebpackPlugin = require('html-webpack-plugin');

module.exports = {
    entry: __dirname + "/app/main.js",//å·²å¤šæ¬¡æåŠçš„å”¯ä¸€å…¥å£æ–‡ä»¶
    output: {
        path: __dirname + "/build",
        filename: "bundle.js"
    },
    devtool: 'eval-source-map',
    devServer: {
        contentBase: "./public",//æœ¬åœ°æœåŠ¡å™¨æ‰€åŠ è½½çš„é¡µé¢æ‰€åœ¨çš„ç›®å½•
        historyApiFallback: true,//ä¸è·³è½¬
        inline: true//å®æ—¶åˆ·æ–°
    },
    module: {
        rules: [
            {
                test: /(\.jsx|\.js)$/,
                use: {
                    loader: "babel-loader"
                },
                exclude: /node_modules/
            },
            {
                test: /\.css$/,
                use: [
                    {
                        loader: "style-loader"
                    }, {
                        loader: "css-loader",
                        options: {
                            modules: true
                        }
                    }, {
                        loader: "postcss-loader"
                    }
                ]
            }
        ]
    },
    plugins: [
        new webpack.BannerPlugin('ç‰ˆæƒæ‰€æœ‰ï¼Œç¿»ç‰ˆå¿…ç©¶'),
        new HtmlWebpackPlugin({
            template: __dirname + "/src/index.tmpl.html"//new ä¸€ä¸ªè¿™ä¸ªæ’ä»¶çš„å®ä¾‹ï¼Œå¹¶ä¼ å…¥ç›¸å…³çš„å‚æ•°
        })
    ],
};
</code></pre></div></div>

<p>å†æ¬¡æ‰§è¡Œnpm startä½ ä¼šå‘ç°ï¼Œbuildæ–‡ä»¶å¤¹ä¸‹é¢ç”Ÿæˆäº†bundle.jså’Œindex.htmlã€‚</p>

<h3 id="hot-module-replacement">Hot Module Replacement</h3>

<p>Hot Module Replacementï¼ˆHMRï¼‰ä¹Ÿæ˜¯webpacké‡Œå¾ˆæœ‰ç”¨çš„ä¸€ä¸ªæ’ä»¶ï¼Œå®ƒå…è®¸ä½ åœ¨ä¿®æ”¹ç»„ä»¶ä»£ç åï¼Œè‡ªåŠ¨åˆ·æ–°å®æ—¶é¢„è§ˆä¿®æ”¹åçš„æ•ˆæœã€‚</p>

<p>åœ¨webpackä¸­å®ç°HMRä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦åšä¸¤é¡¹é…ç½®</p>

<p>1.åœ¨webpacké…ç½®æ–‡ä»¶ä¸­æ·»åŠ HMRæ’ä»¶ï¼›</p>

<p>2.åœ¨Webpack Dev Serverä¸­æ·»åŠ â€œhotâ€å‚æ•°ï¼›</p>

<p>ä¸è¿‡é…ç½®å®Œè¿™äº›åï¼ŒJSæ¨¡å—å…¶å®è¿˜æ˜¯ä¸èƒ½è‡ªåŠ¨çƒ­åŠ è½½çš„ï¼Œè¿˜éœ€è¦åœ¨ä½ çš„JSæ¨¡å—ä¸­æ‰§è¡Œä¸€ä¸ªWebpackæä¾›çš„APIæ‰èƒ½å®ç°çƒ­åŠ è½½ï¼Œè™½ç„¶è¿™ä¸ªAPIä¸éš¾ä½¿ç”¨ï¼Œä½†æ˜¯å¦‚æœæ˜¯Reactæ¨¡å—ï¼Œä½¿ç”¨æˆ‘ä»¬å·²ç»ç†Ÿæ‚‰çš„Babelå¯ä»¥æ›´æ–¹ä¾¿çš„å®ç°åŠŸèƒ½çƒ­åŠ è½½ã€‚</p>

<p>æ•´ç†ä¸‹æˆ‘ä»¬çš„æ€è·¯ï¼Œå…·ä½“å®ç°æ–¹æ³•å¦‚ä¸‹:</p>

<ol>
  <li>Babelå’Œwebpackæ˜¯ç‹¬ç«‹çš„å·¥å…·</li>
  <li>äºŒè€…å¯ä»¥ä¸€èµ·å·¥ä½œ</li>
  <li>äºŒè€…éƒ½å¯ä»¥é€šè¿‡æ’ä»¶æ‹“å±•åŠŸèƒ½</li>
  <li>HMRæ˜¯ä¸€ä¸ªwebpackæ’ä»¶ï¼Œå®ƒè®©ä½ èƒ½æµè§ˆå™¨ä¸­å®æ—¶è§‚å¯Ÿæ¨¡å—ä¿®æ”¹åçš„æ•ˆæœï¼Œä½†æ˜¯å¦‚æœä½ æƒ³è®©å®ƒå·¥ä½œï¼Œéœ€è¦å¯¹æ¨¡å—è¿›è¡Œé¢å¤–çš„é…é¢ï¼›</li>
  <li>Babelæœ‰ä¸€ä¸ªå«åšreact-transform-hrmçš„æ’ä»¶ï¼Œå¯ä»¥åœ¨ä¸å¯¹Reactæ¨¡å—è¿›è¡Œé¢å¤–çš„é…ç½®çš„å‰æä¸‹è®©HMRæ­£å¸¸å·¥ä½œï¼›</li>
</ol>

<p>è¿˜æ˜¯ç»§ç»­ä¸Šä¾‹æ¥å®é™…çœ‹çœ‹å¦‚ä½•é…ç½®</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>const webpack = require('webpack');
const HtmlWebpackPlugin = require('html-webpack-plugin');

module.exports = {
    entry: __dirname + "/app/main.js",//å·²å¤šæ¬¡æåŠçš„å”¯ä¸€å…¥å£æ–‡ä»¶
    output: {
        path: __dirname + "/build",
        filename: "bundle.js"
    },
    devtool: 'eval-source-map',
    devServer: {
        contentBase: "./public",//æœ¬åœ°æœåŠ¡å™¨æ‰€åŠ è½½çš„é¡µé¢æ‰€åœ¨çš„ç›®å½•
        historyApiFallback: true,//ä¸è·³è½¬
        inline: true,
        hot: true
    },
    module: {
        rules: [
            {
                test: /(\.jsx|\.js)$/,
                use: {
                    loader: "babel-loader"
                },
                exclude: /node_modules/
            },
            {
                test: /\.css$/,
                use: [
                    {
                        loader: "style-loader"
                    }, {
                        loader: "css-loader",
                        options: {
                            modules: true
                        }
                    }, {
                        loader: "postcss-loader"
                    }
                ]
            }
        ]
    },
    plugins: [
        new webpack.BannerPlugin('ç‰ˆæƒæ‰€æœ‰ï¼Œç¿»ç‰ˆå¿…ç©¶'),
        new HtmlWebpackPlugin({
            template: __dirname + "/app/index.tmpl.html"//new ä¸€ä¸ªè¿™ä¸ªæ’ä»¶çš„å®ä¾‹ï¼Œå¹¶ä¼ å…¥ç›¸å…³çš„å‚æ•°
        }),
        new webpack.HotModuleReplacementPlugin()//çƒ­åŠ è½½æ’ä»¶
    ],
};
</code></pre></div></div>

<p>å®‰è£…react-transform-hmr</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install --save-dev babel-plugin-react-transform react-transform-hmr
</code></pre></div></div>

<p>é…ç½®Babel</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// .babelrc
{
  "presets": ["react", "env"],
  "env": {
    "development": {
    "plugins": [["react-transform", {
       "transforms": [{
         "transform": "react-transform-hmr",
         
         "imports": ["react"],
         
         "locals": ["module"]
       }]
     }]]
    }
  }
}
</code></pre></div></div>

<p>ç°åœ¨å½“ä½ ä½¿ç”¨Reactæ—¶ï¼Œå¯ä»¥çƒ­åŠ è½½æ¨¡å—äº†,æ¯æ¬¡ä¿å­˜å°±èƒ½åœ¨æµè§ˆå™¨ä¸Šçœ‹åˆ°æ›´æ–°å†…å®¹ã€‚</p>

<h3 id="äº§å“é˜¶æ®µçš„æ„å»º">äº§å“é˜¶æ®µçš„æ„å»º</h3>

<p>ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»ä½¿ç”¨webpackæ„å»ºäº†ä¸€ä¸ªå®Œæ•´çš„å¼€å‘ç¯å¢ƒã€‚ä½†æ˜¯åœ¨äº§å“é˜¶æ®µï¼Œå¯èƒ½è¿˜éœ€è¦å¯¹æ‰“åŒ…çš„æ–‡ä»¶è¿›è¡Œé¢å¤–çš„å¤„ç†ï¼Œæ¯”å¦‚è¯´ä¼˜åŒ–ï¼Œå‹ç¼©ï¼Œç¼“å­˜ä»¥åŠåˆ†ç¦»CSSå’ŒJSã€‚</p>

<p>å¯¹äºå¤æ‚çš„é¡¹ç›®æ¥è¯´ï¼Œéœ€è¦å¤æ‚çš„é…ç½®ï¼Œè¿™æ—¶å€™åˆ†è§£é…ç½®æ–‡ä»¶ä¸ºå¤šä¸ªå°çš„æ–‡ä»¶å¯ä»¥ä½¿å¾—äº‹æƒ…äº•äº•æœ‰æ¡ï¼Œä»¥ä¸Šé¢çš„ä¾‹å­æ¥è¯´ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªwebpack.production.config.jsçš„æ–‡ä»¶ï¼Œåœ¨é‡Œé¢åŠ ä¸ŠåŸºæœ¬çš„é…ç½®,å®ƒå’ŒåŸå§‹çš„webpack.config.jså¾ˆåƒï¼Œå¦‚ä¸‹:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// webpack.production.config.js
const webpack = require('webpack');
const HtmlWebpackPlugin = require('html-webpack-plugin');

module.exports = {
    entry: __dirname + "/app/main.js", //å·²å¤šæ¬¡æåŠçš„å”¯ä¸€å…¥å£æ–‡ä»¶
    output: {
        path: __dirname + "/build",
        filename: "bundle.js"
    },
    devtool: 'null', //æ³¨æ„ä¿®æ”¹äº†è¿™é‡Œï¼Œè¿™èƒ½å¤§å¤§å‹ç¼©æˆ‘ä»¬çš„æ‰“åŒ…ä»£ç 
    devServer: {
        contentBase: "./public", //æœ¬åœ°æœåŠ¡å™¨æ‰€åŠ è½½çš„é¡µé¢æ‰€åœ¨çš„ç›®å½•
        historyApiFallback: true, //ä¸è·³è½¬
        inline: true,
        hot: true
    },
    module: {
        rules: [{
            test: /(\.jsx|\.js)$/,
            use: {
                loader: "babel-loader"
            },
            exclude: /node_modules/
        }, {
            test: /\.css$/,
            use: ExtractTextPlugin.extract({
                fallback: "style-loader",
                use: [{
                    loader: "css-loader",
                    options: {
                        modules: true
                    }
                }, {
                    loader: "postcss-loader"
                }],
            })
        }]
    },
    plugins: [
        new webpack.BannerPlugin('ç‰ˆæƒæ‰€æœ‰ï¼Œç¿»ç‰ˆå¿…ç©¶'),
        new HtmlWebpackPlugin({
            template: __dirname + "/app/index.tmpl.html" //new ä¸€ä¸ªè¿™ä¸ªæ’ä»¶çš„å®ä¾‹ï¼Œå¹¶ä¼ å…¥ç›¸å…³çš„å‚æ•°
        }),
        new webpack.HotModuleReplacementPlugin() //çƒ­åŠ è½½æ’ä»¶
    ],
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//package.json
{
  "name": "test",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",
    "start": "webpack",
    "server": "webpack-dev-server --open",
    "build": "NODE_ENV=production webpack --config ./webpack.production.config.js --progress"
  },
  "author": "",
  "license": "ISC",
  "devDependencies": {
...
  },
  "dependencies": {
    "react": "^15.6.1",
    "react-dom": "^15.6.1"
  }
}
</code></pre></div></div>

<p>æ³¨æ„:å¦‚æœæ˜¯windowç”µè„‘ï¼Œbuildéœ€è¦é…ç½®ä¸ºâ€buildâ€: â€œset NODE_ENV=production &amp;&amp; webpack â€“config ./webpack.production.config.js â€“progressâ€</p>

<h3 id="ä¼˜åŒ–æ’ä»¶">ä¼˜åŒ–æ’ä»¶</h3>

<p>webpackæä¾›äº†ä¸€äº›åœ¨å‘å¸ƒé˜¶æ®µéå¸¸æœ‰ç”¨çš„ä¼˜åŒ–æ’ä»¶ï¼Œå®ƒä»¬å¤§å¤šæ¥è‡ªäºwebpackç¤¾åŒºï¼Œå¯ä»¥é€šè¿‡npmå®‰è£…ï¼Œé€šè¿‡ä»¥ä¸‹æ’ä»¶å¯ä»¥å®Œæˆäº§å“å‘å¸ƒé˜¶æ®µæ‰€éœ€çš„åŠŸèƒ½</p>

<ol>
  <li>OccurenceOrderPlugin :ä¸ºç»„ä»¶åˆ†é…IDï¼Œé€šè¿‡è¿™ä¸ªæ’ä»¶webpackå¯ä»¥åˆ†æå’Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨æœ€å¤šçš„æ¨¡å—ï¼Œå¹¶ä¸ºå®ƒä»¬åˆ†é…æœ€å°çš„ID</li>
  <li>UglifyJsPluginï¼šå‹ç¼©JSä»£ç ï¼›</li>
  <li>ExtractTextPluginï¼šåˆ†ç¦»CSSå’ŒJSæ–‡ä»¶</li>
</ol>

<p>æˆ‘ä»¬ç»§ç»­ç”¨ä¾‹å­æ¥çœ‹çœ‹å¦‚ä½•æ·»åŠ å®ƒä»¬ï¼ŒOccurenceOrder å’Œ UglifyJS plugins éƒ½æ˜¯å†…ç½®æ’ä»¶ï¼Œä½ éœ€è¦åšçš„åªæ˜¯å®‰è£…å…¶å®ƒéå†…ç½®æ’ä»¶</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install --save-dev extract-text-webpack-plugin
</code></pre></div></div>

<p>åœ¨é…ç½®æ–‡ä»¶çš„pluginsåå¼•ç”¨å®ƒä»¬</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// webpack.production.config.js
const webpack = require('webpack');
const HtmlWebpackPlugin = require('html-webpack-plugin');
const ExtractTextPlugin = require('extract-text-webpack-plugin');

module.exports = {
    entry: __dirname + "/app/main.js",//å·²å¤šæ¬¡æåŠçš„å”¯ä¸€å…¥å£æ–‡ä»¶
    output: {
        path: __dirname + "/build",
        filename: "bundle.js"
    },
    devtool: 'none',
    devServer: {
        contentBase: "./public",//æœ¬åœ°æœåŠ¡å™¨æ‰€åŠ è½½çš„é¡µé¢æ‰€åœ¨çš„ç›®å½•
        historyApiFallback: true,//ä¸è·³è½¬
        inline: true,
        hot: true
    },
    module: {
        rules: [
            {
                test: /(\.jsx|\.js)$/,
                use: {
                    loader: "babel-loader"
                },
                exclude: /node_modules/
            },
            {
                test: /\.css$/,
                use: [
                    {
                        loader: "style-loader"
                    }, {
                        loader: "css-loader",
                        options: {
                            modules: true
                        }
                    }, {
                        loader: "postcss-loader"
                    }
                ]
            }
        ]
    },
    plugins: [
        new webpack.BannerPlugin('ç‰ˆæƒæ‰€æœ‰ï¼Œç¿»ç‰ˆå¿…ç©¶'),
        new HtmlWebpackPlugin({
            template: __dirname + "/app/index.tmpl.html"
        }),
        new webpack.optimize.OccurrenceOrderPlugin(),
        new webpack.optimize.UglifyJsPlugin(),
        new ExtractTextPlugin("style.css")
    ],
};
</code></pre></div></div>

<p>æ­¤æ—¶æ‰§è¡Œnpm run buildå¯ä»¥çœ‹è§ä»£ç æ˜¯è¢«å‹ç¼©åçš„</p>

<h3 id="ç¼“å­˜">ç¼“å­˜</h3>

<p>ç¼“å­˜æ— å¤„ä¸åœ¨ï¼Œä½¿ç”¨ç¼“å­˜çš„æœ€å¥½æ–¹æ³•æ˜¯ä¿è¯ä½ çš„æ–‡ä»¶åå’Œæ–‡ä»¶å†…å®¹æ˜¯åŒ¹é…çš„ï¼ˆå†…å®¹æ”¹å˜ï¼Œåç§°ç›¸åº”æ”¹å˜ï¼‰</p>

<p>webpackå¯ä»¥æŠŠä¸€ä¸ªå“ˆå¸Œå€¼æ·»åŠ åˆ°æ‰“åŒ…çš„æ–‡ä»¶åä¸­ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹,æ·»åŠ ç‰¹æ®Šçš„å­—ç¬¦ä¸²æ··åˆä½“ï¼ˆ[name], [id] and [hash]ï¼‰åˆ°è¾“å‡ºæ–‡ä»¶åå‰</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>const webpack = require('webpack');
const HtmlWebpackPlugin = require('html-webpack-plugin');
const ExtractTextPlugin = require('extract-text-webpack-plugin');

module.exports = {
..
    output: {
        path: __dirname + "/build",
        filename: "bundle-[hash].js"
    },
   ...
};
</code></pre></div></div>

<p>ç°åœ¨ç”¨æˆ·ä¼šæœ‰åˆç†çš„ç¼“å­˜äº†ã€‚</p>

<h3 id="å»é™¤buildæ–‡ä»¶ä¸­çš„æ®‹ä½™æ–‡ä»¶">å»é™¤buildæ–‡ä»¶ä¸­çš„æ®‹ä½™æ–‡ä»¶</h3>

<p>æ·»åŠ äº†hashä¹‹åï¼Œä¼šå¯¼è‡´æ”¹å˜æ–‡ä»¶å†…å®¹åé‡æ–°æ‰“åŒ…æ—¶ï¼Œæ–‡ä»¶åä¸åŒè€Œå†…å®¹è¶Šæ¥è¶Šå¤šï¼Œå› æ­¤è¿™é‡Œä»‹ç»å¦å¤–ä¸€ä¸ªå¾ˆå¥½ç”¨çš„æ’ä»¶clean-webpack-pluginã€‚</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>å®‰è£…ï¼š
cnpm install clean-webpack-plugin --save-dev
</code></pre></div></div>

<p>ä½¿ç”¨ï¼š</p>

<p>å¼•å…¥clean-webpack-pluginæ’ä»¶ååœ¨é…ç½®æ–‡ä»¶çš„pluginsä¸­åšç›¸åº”é…ç½®å³å¯ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>const CleanWebpackPlugin = require("clean-webpack-plugin");
  plugins: [
    ...// è¿™é‡Œæ˜¯ä¹‹å‰é…ç½®çš„å…¶å®ƒå„ç§æ’ä»¶
    new CleanWebpackPlugin('build/*.*', {
      root: __dirname,
      verbose: true,
      dry: false
  })
  ]
</code></pre></div></div>

<p>å…³äºclean-webpack-pluginçš„è¯¦ç»†ä½¿ç”¨å¯å‚è€ƒ<a href="https://github.com/johnagan/clean-webpack-plugin">è¿™é‡Œ</a></p>
:ET